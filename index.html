<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orcus - Profile Sharing Website</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: 1px;
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }
        .tagline {
            font-size: 1rem;
            margin-top: 5px;
            opacity: 0.8;
        }
        h1, h2 {
            margin: 0;
        }
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        .form-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .profiles-section {
            flex: 2;
            min-width: 300px;
        }
        .search-section {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }
        .search-input {
            display: flex;
            gap: 10px;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        label {
            font-weight: 600;
            font-size: 14px;
        }
        input, textarea {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        button {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s;
        }
        button:hover {
            background: linear-gradient(135deg, #5a7df8, #9264d9);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .profile-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .profile-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
            border-top: 4px solid #6e8efb;
        }
        .profile-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .profile-name {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }
        .profile-age {
            color: #666;
            font-size: 14px;
        }
        .profile-skill {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 10px;
        }
        .profile-description {
            color: #555;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            /* Add text overflow handling for long descriptions */
            max-height: 100px;
            overflow-y: auto;
        }
        .profile-email {
            color: #6e8efb;
            font-size: 14px;
            margin: 10px 0;
            display: block;
            word-break: break-all;
            border-top: 1px solid #eee;
            padding-top: 10px;
            font-weight: 500;
        }
        .logout-btn {
            background: linear-gradient(135deg, #ff7675, #d63031);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: 600;
        }
        .logout-btn:hover {
            background: linear-gradient(135deg, #ff6b6b, #c72728);
        }
        .error-message {
            color: #d9534f;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        .required::after {
            content: " *";
            color: #d9534f;
        }
        .no-profiles {
            text-align: center;
            color: #666;
            padding: 40px 0;
            font-style: italic;
        }
        .search-input input {
            flex: 1;
        }
        .user-profile-section {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            border-left: 4px solid #6e8efb;
        }
        .user-profile-section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .clear-search {
            background-color: #f0f0f0;
            color: #555;
            border: 1px solid #ddd;
        }
        .clear-search:hover {
            background-color: #e6e6e6;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1 class="logo">ORCUS</h1>
            <p class="tagline">Connect with professionals through skill-based profiles</p>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="form-section" id="profileFormContainer">
                <h2>Create Your Profile</h2>
                <form id="profileForm">
                    <div class="form-group">
                        <label for="name" class="required">Name</label>
                        <input type="text" id="name" required>
                        <div class="error-message" id="nameError">Please enter your name</div>
                    </div>
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="number" id="age" min="18" max="120" required>
                        <div class="error-message" id="ageError">Please enter a valid age (18-120)</div>
                    </div>
                    <div class="form-group">
                        <label for="skill" class="required">Main Skill</label>
                        <input type="text" id="skill" required>
                        <div class="error-message" id="skillError">Please enter your main skill</div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="required">Email</label>
                        <input type="email" id="email" required>
                        <div class="error-message" id="emailError">Please enter a valid email address</div>
                    </div>
                    <div class="form-group">
                        <label for="description" class="required">About Yourself</label>
                        <textarea id="description" required></textarea>
                        <div class="error-message" id="descriptionError">Please enter a description about yourself</div>
                    </div>
                    <button type="submit">Create Profile</button>
                </form>
            </div>
            
            <div class="profiles-section">
                <div id="userProfileContainer" style="display: none;">
                    <div class="user-profile-section">
                        <h2>Your Personal Space</h2>
                        <div id="userProfileCard"></div>
                        <div class="edit-profile-container" style="margin-top: 20px;">
                            <button id="editProfileButton" class="edit-btn">Edit Profile</button>
                            <button id="logoutButton" class="logout-btn">Log Out</button>
                        </div>
                    </div>
                </div>
                
                <div class="search-section">
                    <h2>Search Profiles</h2>
                    <div class="search-input">
                        <input type="text" id="searchSkill" placeholder="Search by skill...">
                        <button id="searchButton">Search</button>
                        <button id="clearSearch" class="clear-search">Clear</button>
                    </div>
                </div>

                <h2>Browse Profiles</h2>
                <div class="profile-grid" id="profileGrid">
                    <div class="no-profiles" id="noProfiles">No profiles have been created yet.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize profiles array from localStorage or empty array if none exists
        let profiles = JSON.parse(localStorage.getItem('profiles')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let filteredProfiles = [...profiles];

        // DOM elements
        const profileForm = document.getElementById('profileForm');
        const profileGrid = document.getElementById('profileGrid');
        const noProfilesMessage = document.getElementById('noProfiles');
        const profileFormContainer = document.getElementById('profileFormContainer');
        const userProfileContainer = document.getElementById('userProfileContainer');
        const userProfileCard = document.getElementById('userProfileCard');
        const logoutButton = document.getElementById('logoutButton');
        const searchSkillInput = document.getElementById('searchSkill');
        const searchButton = document.getElementById('searchButton');
        const clearSearchButton = document.getElementById('clearSearch');

        // Form validation variables
        const nameInput = document.getElementById('name');
        const ageInput = document.getElementById('age');
        const skillInput = document.getElementById('skill');
        const emailInput = document.getElementById('email');
        const descriptionInput = document.getElementById('description');

        // Error message elements
        const nameError = document.getElementById('nameError');
        const ageError = document.getElementById('ageError');
        const skillError = document.getElementById('skillError');
        const emailError = document.getElementById('emailError');
        const descriptionError = document.getElementById('descriptionError');

        // Function to validate email
        function validateEmail(email) {
            if (!email) return false;
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(String(email).toLowerCase());
        }

        // Function to create a profile card
        function createProfileCard(profile) {
            const profileCard = document.createElement('div');
            profileCard.className = 'profile-card';
            profileCard.innerHTML = `
                <div class="profile-header">
                    <h3 class="profile-name">${profile.name}</h3>
                    <span class="profile-age">${profile.age} years</span>
                </div>
                <div class="profile-skill">${profile.skill}</div>
                <p class="profile-description">${profile.description}</p>
                <a href="mailto:${profile.email}" class="profile-email">ðŸ“§ Email: ${profile.email}</a>
            `;
            
            return profileCard;
        }

        // Function to check if user is logged in and update UI
        function checkUserLoggedIn() {
            if (currentUser) {
                // Hide profile form
                profileFormContainer.style.display = 'none';
                // Show user profile
                userProfileContainer.style.display = 'block';
                
                // Display user profile
                userProfileCard.innerHTML = '';
                userProfileCard.appendChild(createProfileCard(currentUser));
            } else {
                // Show profile form and hide user profile
                profileFormContainer.style.display = 'block';
                userProfileContainer.style.display = 'none';
            }
        }

        // Function to display profiles
        function displayProfiles(profilesArray = filteredProfiles) {
            // Clear existing profiles
            profileGrid.innerHTML = '';
            
            if (profilesArray.length === 0) {
                profileGrid.appendChild(noProfilesMessage);
                return;
            }
            
            // Add each profile to the grid
            profilesArray.forEach(profile => {
                const profileCard = createProfileCard(profile);
                profileGrid.appendChild(profileCard);
            });
        }

        // Function to filter profiles by skill
        function filterProfilesBySkill(skill) {
            if (!skill.trim()) {
                filteredProfiles = [...profiles];
            } else {
                const searchTerm = skill.trim().toLowerCase();
                filteredProfiles = profiles.filter(profile => 
                    profile.skill.toLowerCase().includes(searchTerm)
                );
            }
            displayProfiles(filteredProfiles);
        }

        // Function to validate form
        function validateForm() {
            let isValid = true;
            
            // Validate name
            if (nameInput.value.trim() === '') {
                nameError.style.display = 'block';
                isValid = false;
            } else {
                nameError.style.display = 'none';
            }
            
            // Validate age
            const age = parseInt(ageInput.value);
            if (isNaN(age) || age < 18 || age > 120) {
                ageError.style.display = 'block';
                isValid = false;
            } else {
                ageError.style.display = 'none';
            }
            
            // Validate skill
            if (skillInput.value.trim() === '') {
                skillError.style.display = 'block';
                isValid = false;
            } else {
                skillError.style.display = 'none';
            }
            
            // Validate email
            if (!validateEmail(emailInput.value)) {
                emailError.textContent = "Please enter a valid email address";
                emailError.style.display = 'block';
                isValid = false;
            } else {
                // Check if email already exists
                const emailExists = profiles.some(profile => profile.email === emailInput.value.trim());
                if (emailExists) {
                    emailError.textContent = "This email is already registered";
                    emailError.style.display = 'block';
                    isValid = false;
                } else {
                    emailError.style.display = 'none';
                }
            }
            
            // Validate description
            if (descriptionInput.value.trim() === '') {
                descriptionError.style.display = 'block';
                isValid = false;
            } else {
                descriptionError.style.display = 'none';
            }
            
            return isValid;
        }
        
        // Add input validation listeners to immediately show/hide errors
        nameInput.addEventListener('input', () => {
            if (nameInput.value.trim() !== '') {
                nameError.style.display = 'none';
            }
        });
        
        ageInput.addEventListener('input', () => {
            const age = parseInt(ageInput.value);
            if (!isNaN(age) && age >= 18 && age <= 120) {
                ageError.style.display = 'none';
            }
        });
        
        skillInput.addEventListener('input', () => {
            if (skillInput.value.trim() !== '') {
                skillError.style.display = 'none';
            }
        });
        
        emailInput.addEventListener('input', () => {
            if (validateEmail(emailInput.value)) {
                // Check if email already exists
                const emailExists = profiles.some(profile => profile.email === emailInput.value.trim());
                if (emailExists) {
                    emailError.textContent = "This email is already registered";
                    emailError.style.display = 'block';
                } else {
                    emailError.style.display = 'none';
                }
            }
        });
        
        descriptionInput.addEventListener('input', () => {
            if (descriptionInput.value.trim() !== '') {
                descriptionError.style.display = 'none';
            }
        });

        // Search functionality
        searchButton.addEventListener('click', function() {
            filterProfilesBySkill(searchSkillInput.value);
        });

        // Clear search
        clearSearchButton.addEventListener('click', function() {
            searchSkillInput.value = '';
            filteredProfiles = [...profiles];
            displayProfiles();
        });

        // Also allow searching by pressing Enter
        searchSkillInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                filterProfilesBySkill(searchSkillInput.value);
            }
        });

        // Event Listeners
        profileForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }
            
            // Create new profile object
            const newProfile = {
                name: nameInput.value.trim(),
                age: parseInt(ageInput.value),
                skill: skillInput.value.trim(),
                email: emailInput.value.trim(),
                description: descriptionInput.value.trim()
            };
            
            try {
                // Add to profiles array
                profiles.push(newProfile);
                filteredProfiles = [...profiles];
                
                // Save to localStorage
                localStorage.setItem('profiles', JSON.stringify(profiles));
                
                // Set as current user
                localStorage.setItem('currentUser', JSON.stringify(newProfile));
                currentUser = newProfile;
                
                // Update display
                displayProfiles();
                checkUserLoggedIn();
                
                // Reset form
                profileForm.reset();
                
                // Show success message
                alert('Profile created successfully!');
            } catch (error) {
                // Handle localStorage errors (e.g., if storage is full)
                console.error('Error saving profile:', error);
                alert('There was an error saving your profile. Please try again.');
            }
        });

        // Handle logout
        logoutButton.addEventListener('click', function() {
            localStorage.removeItem('currentUser');
            currentUser = null;
            checkUserLoggedIn();
        });
        
        // Display profiles and check login status on page load
        displayProfiles();
        checkUserLoggedIn();
    </script>
</body>
</html>




